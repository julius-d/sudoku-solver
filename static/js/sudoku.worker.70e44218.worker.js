!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function e(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var o=function(){function t(e,o){n(this,t),this.xCoordinate=void 0,this.yCoordinate=void 0,this.xCoordinate=e,this.yCoordinate=o}return e(t,[{key:"getXCoordinate",value:function(){return this.xCoordinate}},{key:"getYCoordinate",value:function(){return this.yCoordinate}},{key:"toString",value:function(){return"Pos: ["+this.xCoordinate+","+this.yCoordinate+"]"}},{key:"valueOf",value:function(){return"["+this.xCoordinate+"]["+this.yCoordinate+"]"}}]),t}();function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}function r(n,t){var e="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"===typeof n)return i(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(n,t):void 0}}(n))||t&&n&&"number"===typeof n.length){e&&(n=e);var o=0,r=function(){};return{s:r,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return a=n.done,n},e:function(n){f=!0,u=n},f:function(){try{a||null==e.return||e.return()}finally{if(f)throw u}}}}var u,a=function(){function t(e,o){if(n(this,t),this.x=void 0,this.y=void 0,e<0||o<0||e>2||o>2)throw new Error("illegal argument x:"+e+" y: "+o);this.x=e,this.y=o}return e(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getAll",value:function(){return t.allInstances}},{key:"allSudokuPositionInThisBox",value:function(){var n=this,e=[];return t.sudokuCoordinateFor(this.y).forEach((function(i){t.sudokuCoordinateFor(n.x).forEach((function(n){var t=new o(n,i);e.push(t)}))})),e}},{key:"toString",value:function(){return"Box: ["+this.x+","+this.y+"]"}}],[{key:"createAll",value:function(){var n=[0,1,2],e=[[],[],[]];return n.forEach((function(o){n.forEach((function(n){e[o][n]=new t(o,n)}))})),e}},{key:"createByPosition",value:function(n){var t=n.getXCoordinate(),e=n.getYCoordinate(),o=this.boxCoordinateFor(t),i=this.boxCoordinateFor(e);return this.allInstances[o][i]}},{key:"boxCoordinateFor",value:function(n){return 0===n||1===n||2===n?0:3===n||4===n||5===n?1:2}},{key:"sudokuCoordinateFor",value:function(n){return 0===n?[0,1,2]:1===n?[3,4,5]:[6,7,8]}},{key:"create",value:function(n,t){return this.allInstances[n][t]}}]),t}();a.allInstances=a.createAll(),function(n){n[n.CANT_BE=0]="CANT_BE",n[n.NUMBER_FOUND=1]="NUMBER_FOUND"}(u||(u={}));var f=u,s=function(){function t(e,o,i){n(this,t),this.type=f.CANT_BE,this.position=void 0,this.number=void 0,this.from=void 0,this.position=e,this.number=o,this.from=i}return e(t,[{key:"getNumber",value:function(){return this.number}},{key:"getPosition",value:function(){return this.position}},{key:"getFrom",value:function(){return this.from}}]),t}(),c=function(){function t(){n(this,t),this.ruleName="BoxCantBeRule"}return e(t,[{key:"finderLogic",value:function(n){var t,e=[],o=r(a.createByPosition(n.getPosition()).allSudokuPositionInThisBox());try{for(o.s();!(t=o.n()).done;){var i=t.value;i.getYCoordinate()===n.getPosition().getYCoordinate()&&i.getXCoordinate()===n.getPosition().getXCoordinate()||e.push(new s(i,n.getNumber(),this.ruleName))}}catch(u){o.e(u)}finally{o.f()}return e}}]),t}(),l=function(){function t(){n(this,t),this.name="HorizontalCantBeRule"}return e(t,[{key:"finderLogic",value:function(n){var t=this,e=[],i=n.getPosition().getXCoordinate();return[0,1,2,3,4,5,6,7,8].forEach((function(r){r!==n.getPosition().getYCoordinate()&&e.push(new s(new o(i,r),n.getNumber(),t.name))})),e}}]),t}(),h=function(){function t(){n(this,t),this.name="VerticalCantBeRule"}return e(t,[{key:"finderLogic",value:function(n){var t=this,e=[],i=n.getPosition().getYCoordinate();return[0,1,2,3,4,5,6,7,8].forEach((function(r){r!==n.getPosition().getXCoordinate()&&e.push(new s(new o(r,i),n.getNumber(),t.name))})),e}}]),t}(),v=function(){function t(){n(this,t),this.name="OnePositionCantBeRule"}return e(t,[{key:"finderLogic",value:function(n){var t=this,e=[];return[1,2,3,4,5,6,7,8,9].forEach((function(o){o!==n.getNumber()&&e.push(new s(n.getPosition(),o,t.name))})),e}}]),t}(),d=function(){function t(e,o,i){n(this,t),this.type=f.NUMBER_FOUND,this.position=void 0,this.number=void 0,this.from=void 0,this.position=e,this.number=o,this.from=i}return e(t,[{key:"getNumber",value:function(){return this.number}},{key:"getPosition",value:function(){return this.position}},{key:"getFrom",value:function(){return this.from}}]),t}(),g=function(){function t(){n(this,t),this.memory=void 0,this.name="OnlyOnePlaceHorizontalLine",this.memory=t.initMemory()}return e(t,[{key:"finderLogic",value:function(n){var e=this,o=[];return n.forEach((function(n){var i,r=(null===(i=e.memory.get(n.getPosition().getXCoordinate()))||void 0===i?void 0:i.get(n.getNumber()))||[];r.find((function(t){return t.getXCoordinate()===n.getPosition().getXCoordinate()&&t.getYCoordinate()===n.getPosition().getYCoordinate()}))||(r.push(n.getPosition()),8===r.length&&o.push(new d(t.onlyPossiblePosition(r),n.getNumber(),e.name)))})),o}}],[{key:"initMemory",value:function(){for(var n=new Map,t=[1,2,3,4,5,6,7,8,9],e=function(e){var o=new Map;t.forEach((function(n){o.set(n,[])})),n.set(e,o)},o=0;o<9;o++)e(o);return n}},{key:"onlyPossiblePosition",value:function(n){for(var t=[0,1,2,3,4,5,6,7,8],e=function(e){var i=t[e];if(!n.find((function(n){return n.getYCoordinate()===i})))return{v:new o(n[0].getXCoordinate(),i)}},i=0;i<t.length;i++){var r=e(i);if("object"===typeof r)return r.v}throw new Error("should not happen")}}]),t}(),y=function(){function t(){n(this,t),this.memory=void 0,this.name="OnlyOnePlaceVerticalLine",this.memory=t.initMemory()}return e(t,[{key:"finderLogic",value:function(n){var e=this,o=[];return n.forEach((function(n){var i,r=(null===(i=e.memory.get(n.getPosition().getYCoordinate()))||void 0===i?void 0:i.get(n.getNumber()))||[];r.find((function(t){return t.getXCoordinate()===n.getPosition().getXCoordinate()&&t.getYCoordinate()===n.getPosition().getYCoordinate()}))||(r.push(n.getPosition()),8===r.length&&o.push(new d(t.onlyPossiblePosition(r),n.getNumber(),e.name)))})),o}}],[{key:"initMemory",value:function(){var n=[1,2,3,4,5,6,7,8,9],t=new Map;return[0,1,2,3,4,5,6,7,8].forEach((function(e){var o=new Map;n.forEach((function(n){o.set(n,[])})),t.set(e,o)})),t}},{key:"onlyPossiblePosition",value:function(n){for(var t=[0,1,2,3,4,5,6,7,8],e=function(e){var i=t[e];if(!n.find((function(n){return n.getXCoordinate()===i})))return{v:new o(i,n[0].getYCoordinate())}},i=0;i<t.length;i++){var r=e(i);if("object"===typeof r)return r.v}throw new Error("should not happen")}}]),t}();function m(n,t){return n.getXCoordinate()===t.getXCoordinate()&&n.getYCoordinate()===t.getYCoordinate()}var C=function(){function t(){n(this,t),this.memory=t.init(),this.name="OnlyOnePlaceBox"}return e(t,[{key:"finderLogic",value:function(n){var t,e=this,o=[],i=r(n);try{var u=function(){var n,i=t.value,r=i.getPosition(),u=i.getNumber(),f=a.createByPosition(r),s=null===(n=e.memory.get(f))||void 0===n?void 0:n.get(u);s&&!s.find((function(n){return m(r,n)}))&&(s.push(r),8===s.length&&f.allSudokuPositionInThisBox().forEach((function(n){s.find((function(t){return m(n,t)}))||o.push(new d(n,u,e.name))})))};for(i.s();!(t=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}return o}}],[{key:"init",value:function(){for(var n=[1,2,3,4,5,6,7,8,9],t=new Map,e=0;e<3;e++)for(var o=function(o){var i=new Map;n.forEach((function(n){i.set(n,[])})),t.set(a.create(e,o),i)},i=0;i<3;i++)o(i);return t}}]),t}(),b=function(){function t(){n(this,t),this.notThisNumber=t.createBoolean3dArray(),this.name="OnePositionFinder"}return e(t,[{key:"finderLogic",value:function(n){var t,e=this,o=[],i=r(n);try{var u=function(){var n=t.value,i=n.getPosition(),r=n.getNumber();e.notThisNumber[i.getXCoordinate()][i.getYCoordinate()][r]=!0;var u=0,a=null;[1,2,3,4,5,6,7,8,9].forEach((function(n){e.notThisNumber[i.getXCoordinate()][i.getYCoordinate()][n]||(u++,a=n)})),1===u&&null!==a&&o.push(new d(i,a,e.name))};for(i.s();!(t=i.n()).done;)u()}catch(a){i.e(a)}finally{i.f()}return o}}],[{key:"createBoolean3dArray",value:function(){for(var n=[],t=0;t<9;t++){n[t]=[];for(var e=0;e<9;e++){n[t][e]=[];for(var o=0;o<9;o++)n[t][e][o]=!1}}return n}}]),t}(),p=function(){function t(){n(this,t),this.numberFound=[[],[],[],[],[],[],[],[],[]]}return e(t,[{key:"removeAlreadySeen",value:function(n){var t,e=[],o=r(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.type===f.NUMBER_FOUND?this.numberFound[i.getPosition().getXCoordinate()][i.getPosition().getYCoordinate()]||(this.numberFound[i.getPosition().getXCoordinate()][i.getPosition().getYCoordinate()]=i.getNumber(),e.push(i)):e.push(i)}}catch(u){o.e(u)}finally{o.f()}return e}}]),t}(),w=[new c,new l,new h,new v],P=[new g,new y,new C,new b],k=new p;let E=new(function(){function t(){n(this,t)}return e(t,[{key:"handleGivenNumber",value:function(n,t){var e=[n];do{var o,i=[],u=r(w);try{for(u.s();!(o=u.n()).done;){var a,f=o.value,s=r(e);try{for(s.s();!(a=s.n()).done;){var c=a.value;i=i.concat(f.finderLogic(c))}}catch(d){s.e(d)}finally{s.f()}}}catch(d){u.e(d)}finally{u.f()}i.forEach((function(n){t(n)})),e=[];var l,h=r(P);try{for(h.s();!(l=h.n()).done;){var v=l.value;e=e.concat(v.finderLogic(i))}}catch(d){h.e(d)}finally{h.f()}(e=k.removeAlreadySeen(e)).forEach((function(n){t(n)}))}while(e.length>0)}}]),t}());addEventListener("message",(({data:n})=>{console.log("worker got message",n);let t=new d(new o(n.field[0],n.field[1]),n.value,"USER");E.handleGivenNumber(t,postMessage)}))}();
//# sourceMappingURL=sudoku.worker.70e44218.worker.js.map